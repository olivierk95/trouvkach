(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{93:function(n,e,r){"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}e.math=!0,e.name="simplify",e.factory=function(n,e,a,o,l){var i=a(r(46)),s=a(r(53)),c=a(r(62)),f=a(r(75)),u=a(r(63)),p=a(r(74)),h=a(r(56)),g=a(r(129)),d=a(r(131)),v=a(r(222)),m=a(r(130)),y=m.isCommutative,b=m.isAssociative,w=m.flatten,O=m.unflattenr,N=m.unflattenl,x=m.createMakeNodeFunction,j=o("simplify",{string:function(n){return j(i(n),j.rules,{},{})},"string, Object":function(n,e){return j(i(n),j.rules,e,{})},"string, Object, Object":function(n,e,r){return j(i(n),j.rules,e,r)},"string, Array":function(n,e){return j(i(n),e,{},{})},"string, Array, Object":function(n,e,r){return j(i(n),e,r,{})},"string, Array, Object, Object":function(n,e,r,t){return j(i(n),e,r,t)},"Node, Object":function(n,e){return j(n,j.rules,e,{})},"Node, Object, Object":function(n,e,r){return j(n,j.rules,e,r)},Node:function(n){return j(n,j.rules,{},{})},"Node, Array":function(n,e){return j(n,e,{},{})},"Node, Array, Object":function(n,e,r){return j(n,e,r,{})},"Node, Array, Object, Object":function(n,e,r,a){e=function(n){for(var e=[],r=0;r<n.length;r++){var a=n[r],o=void 0,l=t(a);switch(l){case"string":var s=a.split("->");if(2!==s.length)throw SyntaxError("Could not parse rule: "+a);a={l:s[0],r:s[1]};case"object":if(o={l:S(i(a.l)),r:S(i(a.r))},a.context&&(o.evaluate=a.context),a.evaluate&&(o.evaluate=i(a.evaluate)),b(o.l)){var c=x(o.l),f=new h("_p"+A++);o.expanded={},o.expanded.l=c([o.l.clone(),f]),w(o.expanded.l),O(o.expanded.l),o.expanded.r=c([o.r,f])}break;case"function":o=a;break;default:throw TypeError("Unsupported type of rule: "+l)}e.push(o)}return e}(e);for(var o=v(n,r),l={},s=(o=S(o)).toString({parenthesis:"all"});!l[s];){l[s]=!0,A=0;for(var c=0;c<e.length;c++)"function"==typeof e[c]?o=e[c](o,a):(w(o),o=k(o,e[c])),N(o);s=o.toString({parenthesis:"all"})}return o}});function S(e){return e.transform(function(e,r,t){return n.isParenthesisNode(e)?e.content:e})}j.simplifyCore=d,j.resolve=v;var E={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};j.rules=[d,{l:"log(e)",r:"1"},{l:"n-n1",r:"n+-n1"},{l:"-(c*v)",r:"(-c) * v"},{l:"-v",r:"(-1) * v"},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{l:"(n ^ n1) ^ n2",r:"n ^ (n1 * n2)"},{l:"n*n",r:"n^2"},{l:"n * n^n1",r:"n^(n1+1)"},{l:"n^n1 * n^n2",r:"n^(n1+n2)"},{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},{l:"n1*n2 + n2",r:"(n1+1)*n2"},{l:"n1*n3 + n2*n3",r:"(n1+n2)*n3"},{l:"n1 + -1 * (n2 + n3)",r:"n1 + -1 * n2 + -1 * n3"},g,{l:"(-n)*n1",r:"-(n*n1)"},{l:"c+v",r:"v+c",context:{add:{commutative:!1}}},{l:"v*c",r:"c*v",context:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"n-(n1+n2)",r:"n-n1-n2"},{l:"1*n",r:"n"}];var A=0,k=o("applyRule",{"Node, Object":function(n,e){var r=n;if(r instanceof u||r instanceof f){if(r.args)for(var t=0;t<r.args.length;t++)r.args[t]=k(r.args[t],e)}else r instanceof p&&r.content&&(r.content=k(r.content,e));var a=e.r,o=P(e.l,r)[0];if(!o&&e.expanded&&(a=e.expanded.r,o=P(e.expanded.l,r)[0]),o){var l=r.implicit;r=a.clone(),l&&"implicit"in a&&(r.implicit=!0),r=function n(e){return e.isSymbolNode&&o.placeholders.hasOwnProperty(e.name)?o.placeholders[e.name].clone():e.map(n)}(r)}return r}});function C(n,e){var r={placeholders:{}};if(!n.placeholders&&!e.placeholders)return r;if(!n.placeholders)return e;if(!e.placeholders)return n;for(var t in n.placeholders)if(r.placeholders[t]=n.placeholders[t],e.placeholders.hasOwnProperty(t)&&!J(n.placeholders[t],e.placeholders[t]))return null;for(var a in e.placeholders)r.placeholders[a]=e.placeholders[a];return r}function L(n,e){var r,t=[];if(0===n.length||0===e.length)return t;for(var a=0;a<n.length;a++)for(var o=0;o<e.length;o++)(r=C(n[a],e[o]))&&t.push(r);return t}function P(e,r,t){var a=[{placeholders:{}}];if(e instanceof u&&r instanceof u||e instanceof f&&r instanceof f){if(e instanceof u){if(e.op!==r.op||e.fn!==r.fn)return[]}else if(e instanceof f&&e.name!==r.name)return[];if((1!==r.args.length||1!==e.args.length)&&b(r)&&!t){if(r.args.length>=2&&2===e.args.length){for(var o=function(n,e){var r,t,a=[],o=x(n);if(y(n,e))for(var l=0;l<n.args.length;l++)(t=n.args.slice(0)).splice(l,1),r=1===t.length?t[0]:o(t),a.push(o([n.args[l],r]));else r=1===(t=n.args.slice(1)).length?t[0]:o(t),a.push(o([n.args[0],r]));return a}(r,e.context),i=[],p=0;p<o.length;p++){var g=P(e,o[p],!0);i=i.concat(g)}return i}if(e.args.length>2)throw Error("Unexpected non-binary associative function: "+e.toString());return[]}for(var d=[],v=0;v<e.args.length;v++){var m=P(e.args[v],r.args[v]);if(0===m.length)return[];d.push(m)}a=function(n){if(0===n.length)return n;for(var e=n.reduce(L),r=[],t={},a=0;a<e.length;a++){var o=JSON.stringify(e[a]);t[o]||(t[o]=!0,r.push(e[a]))}return r}(d)}else if(e instanceof h){if(0===e.name.length)throw new Error("Symbol in rule has 0 length...!?");if(l.hasOwnProperty(e.name)){if(!E[e.name])throw new Error("Built in constant: "+e.name+" is not supported by simplify.");if(e.name!==r.name)return[]}else if("n"===e.name[0]||"_p"===e.name.substring(0,2))a[0].placeholders[e.name]=r;else if("v"===e.name[0]){if(n.isConstantNode(r))return[];a[0].placeholders[e.name]=r}else{if("c"!==e.name[0])throw new Error("Invalid symbol in rule: "+e.name);if(!(r instanceof c))return[];a[0].placeholders[e.name]=r}}else{if(!(e instanceof c))return[];if(!s(e.value,r.value))return[]}return a}function J(n,e){if(n instanceof c&&e instanceof c){if(!s(n.value,e.value))return!1}else if(n instanceof h&&e instanceof h){if(n.name!==e.name)return!1}else{if(!(n instanceof u&&e instanceof u||n instanceof f&&e instanceof f))return!1;if(n instanceof u){if(n.op!==e.op||n.fn!==e.fn)return!1}else if(n instanceof f&&n.name!==e.name)return!1;if(n.args.length!==e.args.length)return!1;for(var r=0;r<n.args.length;r++)if(!J(n.args[r],e.args[r]))return!1}return!0}return j}}}]);