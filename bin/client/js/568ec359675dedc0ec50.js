(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{46:function(e,n,t){"use strict";function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}var r=t(60),i=t(0);n.name="parse",n.path="expression",n.factory=function(e,n,u,f){var a=u(t(72)),s=u(t(118)),k=u(t(121)),c=u(t(122)),p=u(t(123)),l=u(t(124)),d=u(t(62)),h=u(t(125)),w=u(t(126)),v=u(t(127)),D=u(t(63)),y=u(t(74)),m=u(t(75)),g=u(t(128)),x=u(t(129)),L=u(t(57));function E(n,t){if(1!==arguments.length&&2!==arguments.length)throw new r("parse",arguments.length,1,2);var o=t&&t.nodes?t.nodes:{};if("string"==typeof n)return Y(n,o);if(Array.isArray(n)||n instanceof e.Matrix)return i(n,function(e){if("string"!=typeof e)throw new TypeError("String expected");return Y(e,o)});throw new TypeError("String or matrix expected")}var T={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},N={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},M={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},O={true:!0,false:!1,null:null,undefined:void 0},b=["NaN","Infinity"];function C(e,n){return e.expression.substr(e.index,n)}function S(e){return C(e,1)}function A(e){e.index++}function I(e){return e.expression.charAt(e.index-1)}function P(e){return e.expression.charAt(e.index+1)}function B(e){for(e.tokenType=T.NULL,e.token="",e.comment="";E.isWhitespace(S(e),e.nestingLevel);)A(e);if("#"===S(e))for(;"\n"!==S(e)&&""!==S(e);)e.comment+=S(e),A(e);if(""!==S(e)){if("\n"===S(e)&&!e.nestingLevel)return e.tokenType=T.DELIMITER,e.token=S(e),void A(e);var n=S(e),t=C(e,2),o=C(e,3);if(3===o.length&&N[o])return e.tokenType=T.DELIMITER,e.token=o,A(e),A(e),void A(e);if(2===t.length&&N[t])return e.tokenType=T.DELIMITER,e.token=t,A(e),void A(e);if(N[n])return e.tokenType=T.DELIMITER,e.token=n,void A(e);if(E.isDigitDot(n)){if(e.tokenType=T.NUMBER,"."===S(e))e.token+=S(e),A(e),E.isDigit(S(e))||(e.tokenType=T.DELIMITER);else{for(;E.isDigit(S(e));)e.token+=S(e),A(e);E.isDecimalMark(S(e),P(e))&&(e.token+=S(e),A(e))}for(;E.isDigit(S(e));)e.token+=S(e),A(e);if("E"===S(e)||"e"===S(e))if(E.isDigit(P(e))||"-"===P(e)||"+"===P(e)){if(e.token+=S(e),A(e),"+"!==S(e)&&"-"!==S(e)||(e.token+=S(e),A(e)),!E.isDigit(S(e)))throw ue(e,'Digit expected, got "'+S(e)+'"');for(;E.isDigit(S(e));)e.token+=S(e),A(e);if(E.isDecimalMark(S(e),P(e)))throw ue(e,'Digit expected, got "'+S(e)+'"')}else if("."===P(e))throw A(e),ue(e,'Digit expected, got "'+S(e)+'"')}else{if(!E.isAlpha(S(e),I(e),P(e))){for(e.tokenType=T.UNKNOWN;""!==S(e);)e.token+=S(e),A(e);throw ue(e,'Syntax error in part "'+e.token+'"')}for(;E.isAlpha(S(e),I(e),P(e))||E.isDigit(S(e));)e.token+=S(e),A(e);M.hasOwnProperty(e.token)?e.tokenType=T.DELIMITER:e.tokenType=T.SYMBOL}}else e.tokenType=T.DELIMITER}function R(e){do{B(e)}while("\n"===e.token)}function U(e){e.nestingLevel++}function F(e){e.nestingLevel--}function Y(e,n){var t={extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:T.NULL,nestingLevel:0,conditionalLevel:null};o(t,{expression:e,extraNodes:n}),B(t);var r=function(e){var n,t,o=[];for(""!==e.token&&"\n"!==e.token&&";"!==e.token&&((n=j(e)).comment=e.comment);"\n"===e.token||";"===e.token;)0===o.length&&n&&(t=";"!==e.token,o.push({node:n,visible:t})),B(e),"\n"!==e.token&&";"!==e.token&&""!==e.token&&((n=j(e)).comment=e.comment,t=";"!==e.token,o.push({node:n,visible:t}));return o.length>0?new p(o):(n||((n=new d(void 0)).comment=e.comment),n)}(t);if(""!==t.token)throw t.tokenType===T.DELIMITER?fe(t,"Unexpected operator "+t.token):ue(t,'Unexpected part "'+t.token+'"');return r}function j(n){var t,o,r,i,u=function(e){for(var n=function(e){for(var n=V(e);"or"===e.token;)R(e),n=new D("or","or",[n,V(e)]);return n}(e);"?"===e.token;){var t=e.conditionalLevel;e.conditionalLevel=e.nestingLevel,R(e);var o=n,r=j(e);if(":"!==e.token)throw ue(e,"False part of conditional expression expected");e.conditionalLevel=null,R(e);var i=j(e);n=new l(o,r,i),e.conditionalLevel=t}return n}(n);if("="===n.token){if(e.isSymbolNode(u))return t=u.name,R(n),r=j(n),new c(new L(t),r);if(e.isAccessorNode(u))return R(n),r=j(n),new c(u.object,u.index,r);if(e.isFunctionNode(u)&&e.isSymbolNode(u.fn)&&(i=!0,o=[],t=u.name,u.args.forEach(function(n,t){e.isSymbolNode(n)?o[t]=n.name:i=!1}),i))return R(n),r=j(n),new h(t,o,r);throw ue(n,"Invalid left hand side of assignment operator =")}return u}function V(e){for(var n=$(e);"xor"===e.token;)R(e),n=new D("xor","xor",[n,$(e)]);return n}function $(e){for(var n=q(e);"and"===e.token;)R(e),n=new D("and","and",[n,q(e)]);return n}function q(e){for(var n=J(e);"|"===e.token;)R(e),n=new D("|","bitOr",[n,J(e)]);return n}function J(e){for(var n=W(e);"^|"===e.token;)R(e),n=new D("^|","bitXor",[n,W(e)]);return n}function W(e){for(var n=G(e);"&"===e.token;)R(e),n=new D("&","bitAnd",[n,G(e)]);return n}function G(e){for(var n=[K(e)],t=[],o={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};o.hasOwnProperty(e.token);){var r={name:e.token,fn:o[e.token]};t.push(r),R(e),n.push(K(e))}return 1===n.length?n[0]:2===n.length?new D(t[0].name,t[0].fn,n):new x(t.map(function(e){return e.fn}),n)}function K(e){var n,t,o,r,i;for(n=z(e),t={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};t.hasOwnProperty(e.token);)r=t[o=e.token],R(e),i=[n,z(e)],n=new D(o,r,i);return n}function z(e){var n,t,o,r,i;for(n=X(e),t={to:"to",in:"to"};t.hasOwnProperty(e.token);)r=t[o=e.token],R(e),"in"===o&&""===e.token?n=new D("*","multiply",[n,new L("in")],!0):(i=[n,X(e)],n=new D(o,r,i));return n}function X(e){var n,t=[];if(n=":"===e.token?new d(1):Z(e),":"===e.token&&e.conditionalLevel!==e.nestingLevel){for(t.push(n);":"===e.token&&t.length<3;)R(e),")"===e.token||"]"===e.token||","===e.token||""===e.token?t.push(new L("end")):t.push(Z(e));n=3===t.length?new g(t[0],t[2],t[1]):new g(t[0],t[1])}return n}function Z(e){var n,t,o,r,i;for(n=_(e),t={"+":"add","-":"subtract"};t.hasOwnProperty(e.token);)r=t[o=e.token],R(e),i=[n,_(e)],n=new D(o,r,i);return n}function _(e){var n,t,o,r,i;for(t=n=H(e),o={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};o.hasOwnProperty(e.token);)i=o[r=e.token],R(e),t=H(e),n=new D(r,i,[n,t]);return n}function H(n){var t,o;for(o=t=Q(n);n.tokenType===T.SYMBOL||"in"===n.token&&e.isConstantNode(t)||!(n.tokenType!==T.NUMBER||e.isConstantNode(o)||e.isOperatorNode(o)&&"!"!==o.op)||"("===n.token;)o=Q(n),t=new D("*","multiply",[t,o],!0);return t}function Q(n){for(var t=ee(n),r=t,i=[];"/"===n.token&&e.isConstantNode(r);){if(i.push(o({},n)),R(n),n.tokenType!==T.NUMBER){o(n,i.pop());break}if(i.push(o({},n)),R(n),n.tokenType!==T.SYMBOL&&"("!==n.token){i.pop(),o(n,i.pop());break}o(n,i.pop()),i.pop(),r=ee(n),t=new D("/","divide",[t,r])}return t}function ee(e){var t,o,r,i={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return i.hasOwnProperty(e.token)?(r=i[e.token],t=e.token,R(e),o=[ee(e)],new D(t,r,o)):function(e){var t,o,r,i;return t=function(e){var t,o,r,i;for(t=function(e){var t=[];if(e.tokenType===T.SYMBOL&&e.extraNodes.hasOwnProperty(e.token)){var o=e.extraNodes[e.token];if(B(e),"("===e.token){if(t=[],U(e),B(e),")"!==e.token)for(t.push(j(e));","===e.token;)B(e),t.push(j(e));if(")"!==e.token)throw ue(e,"Parenthesis ) expected");F(e),B(e)}return new o(t)}return function(e){var t,o;return e.tokenType===T.SYMBOL||e.tokenType===T.DELIMITER&&e.token in M?(o=e.token,B(e),t=O.hasOwnProperty(o)?new d(O[o]):-1!==b.indexOf(o)?new d(a(o,"number")):new L(o),t=ne(e,t)):function(e){var t,o;return'"'===e.token?(o=te(e),t=new d(o),t=ne(e,t)):function(e){var t,o;return"'"===e.token?(o=oe(e),t=new d(o),t=ne(e,t)):function(e){var t,o,r,i;if("["===e.token){if(U(e),B(e),"]"!==e.token){var u=re(e);if(";"===e.token){for(r=1,o=[u];";"===e.token;)B(e),o[r]=re(e),r++;if("]"!==e.token)throw ue(e,"End of matrix ] expected");F(e),B(e),i=o[0].items.length;for(var f=1;f<r;f++)if(o[f].items.length!==i)throw fe(e,"Column dimensions mismatch ("+o[f].items.length+" !== "+i+")");t=new k(o)}else{if("]"!==e.token)throw ue(e,"End of matrix ] expected");F(e),B(e),t=u}}else F(e),B(e),t=new k([]);return ne(e,t)}return function(e){if("{"===e.token){var t;U(e);var o={};do{if(B(e),"}"!==e.token){if('"'===e.token)t=te(e);else if("'"===e.token)t=oe(e);else{if(e.tokenType!==T.SYMBOL)throw ue(e,"Symbol or string expected as object key");t=e.token,B(e)}if(":"!==e.token)throw ue(e,"Colon : expected after object key");B(e),o[t]=j(e)}}while(","===e.token);if("}"!==e.token)throw ue(e,"Comma , or bracket } expected after object value");F(e),B(e);var r=new v(o);return r=ne(e,r)}return function(e){var t;return e.tokenType===T.NUMBER?(t=e.token,B(e),new d(a(t,n.number))):function(e){var n;if("("===e.token){if(U(e),B(e),n=j(e),")"!==e.token)throw ue(e,"Parenthesis ) expected");return F(e),B(e),n=new y(n),n=ne(e,n)}return function(e){throw""===e.token?ue(e,"Unexpected end of expression"):ue(e,"Value expected")}(e)}(e)}(e)}(e)}(e)}(e)}(e)}(e)}(e),o={"!":"factorial","'":"ctranspose"};o.hasOwnProperty(e.token);)r=e.token,i=o[r],B(e),t=new D(r,i,[t]),t=ne(e,t);return t}(e),("^"===e.token||".^"===e.token)&&(o=e.token,r="^"===o?"pow":"dotPow",R(e),i=[t,ee(e)],t=new D(o,r,i)),t}(e)}function ne(n,t,o){for(var r;!("("!==n.token&&"["!==n.token&&"."!==n.token||o&&-1===o.indexOf(n.token));)if(r=[],"("===n.token){if(!e.isSymbolNode(t)&&!e.isAccessorNode(t))return t;if(U(n),B(n),")"!==n.token)for(r.push(j(n));","===n.token;)B(n),r.push(j(n));if(")"!==n.token)throw ue(n,"Parenthesis ) expected");F(n),B(n),t=new m(t,r)}else if("["===n.token){if(U(n),B(n),"]"!==n.token)for(r.push(j(n));","===n.token;)B(n),r.push(j(n));if("]"!==n.token)throw ue(n,"Parenthesis ] expected");F(n),B(n),t=new s(t,new w(r))}else{if(B(n),n.tokenType!==T.SYMBOL)throw ue(n,"Property name expected after dot");r.push(new d(n.token)),B(n),t=new s(t,new w(r,!0))}return t}function te(e){for(var n="";""!==S(e)&&'"'!==S(e);)"\\"===S(e)&&(n+=S(e),A(e)),n+=S(e),A(e);if(B(e),'"'!==e.token)throw ue(e,'End of string " expected');return B(e),JSON.parse('"'+n+'"')}function oe(e){for(var n="";""!==S(e)&&"'"!==S(e);)"\\"===S(e)&&(n+=S(e),A(e)),n+=S(e),A(e);if(B(e),"'"!==e.token)throw ue(e,"End of string ' expected");return B(e),JSON.parse('"'+n+'"')}function re(e){for(var n=[j(e)],t=1;","===e.token;)B(e),n[t]=j(e),t++;return new k(n)}function ie(e){return e.index-e.token.length+1}function ue(e,n){var t=ie(e),o=new SyntaxError(n+" (char "+t+")");return o.char=t,o}function fe(e,n){var t=ie(e),o=new SyntaxError(n+" (char "+t+")");return o.char=t,o}return E.isAlpha=function(e,n,t){return E.isValidLatinOrGreek(e)||E.isValidMathSymbol(e,t)||E.isValidMathSymbol(n,e)},E.isValidLatinOrGreek=function(e){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(e)},E.isValidMathSymbol=function(e,n){return/^[\uD835]$/.test(e)&&/^[\uDC00-\uDFFF]$/.test(n)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(n)},E.isWhitespace=function(e,n){return" "===e||"\t"===e||"\n"===e&&n>0},E.isDecimalMark=function(e,n){return"."===e&&"/"!==n&&"*"!==n&&"^"!==n},E.isDigitDot=function(e){return e>="0"&&e<="9"||"."===e},E.isDigit=function(e){return e>="0"&&e<="9"},E}}}]);